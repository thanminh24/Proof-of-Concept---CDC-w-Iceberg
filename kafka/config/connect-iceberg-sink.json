{
  "name": "iceberg-sink",
  "config": {
    "connector.class": "org.apache.iceberg.connect.IcebergSinkConnector",
    "tasks.max": "1",
    "errors.log.enable": "true",
    "errors.tolerance": "none",
    "errors.log.include.messages": "true",
    "topics.regex": "cdc.commerce.*",
    "transforms": "debezium",
    "transforms.debezium.type": "org.apache.iceberg.connect.transforms.DebeziumTransform",
    "transforms.debezium.cdc.target.pattern": "cdc.sql_{table}",
    "iceberg.tables.route-field": "_cdc.target",
    "iceberg.tables.dynamic-enabled": "true",
    "iceberg.tables.auto-create-enabled": "true",
    "iceberg.tables.evolve-schema-enabled": "true",
    "iceberg.control.commit.interval-ms": "10000",
    "iceberg.control.commit.timeout-ms": "60000",
    "iceberg.catalog": "iceberg",
    "iceberg.catalog.type": "hive",
    "iceberg.catalog.uri": "<HIVE_METASTORE_URI>",
    "iceberg.catalog.io-impl": "org.apache.iceberg.aws.s3.S3FileIO",
    "iceberg.catalog.warehouse": "<S3_WAREHOUSE_PATH>",
    "iceberg.catalog.s3.endpoint": "<S3_ENDPOINT>",
    "iceberg.catalog.s3.access-key-id": "<S3_ACCESS_KEY>",
    "iceberg.catalog.s3.secret-access-key": "<S3_SECRET_KEY>",
    "iceberg.catalog.s3.path-style-access": "true",
    "iceberg.catalog.s3.region": "<S3_REGION>",
    "iceberg.catalog.s3.signer.region": "<S3_SIGNER_REGION>",
    "iceberg.table.cdc.commerce_account.id-columns": "user_id",
    "iceberg.table.cdc.commerce_account.schema": "user_id:long,email:string",
    "iceberg.table.cdc.commerce_product.id-columns": "product_id",
    "iceberg.table.cdc.commerce_product.schema": "product_id:long,product_name:string"
  }
}
